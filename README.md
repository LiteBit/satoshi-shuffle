# Satoshi Shuffle  
![GitHub](https://img.shields.io/badge/Status-Experimental-yellow)  
![GitHub](https://img.shields.io/badge/License-MIT-blue)  

A **provably fair betting game** built with **Nostr** and **Lightning Network**, designed for transparency and trustless gameplay.  

---

## Features  
- **Provably Fair Outcomes**: Server seeds published on Nostr before results are revealed.  
- **Range Betting**: Choose from predefined ranges (e.g., 10%, 33%, 50%, 75%) with adjusted payouts.  
- **Lightning Network Payments**: Instant, low-fee bets and payouts.  
- **Automation-Friendly**: Clients can verify outcomes automatically (supports bot strategies like Martingale).  
- **Open Source**: Fully auditable code for trust and collaboration.  

---

## Getting Started  
### Prerequisites  
- Node.js (v18+) and npm  
- A Lightning Network node (e.g., LND, CLN) or API (e.g., LNBits)  
- A Nostr private key for server seed signing  

### Setup  
1. **Clone the repository**:  
   ```bash  
   git clone https://github.com/LiteBit/satoshi-shuffle.git  
   cd satoshi-shuffle  
   ```  

2. **Install dependencies**:  
   ```bash  
   npm install  
   ```  

3. **Configure environment variables**:  
   Create a `.env` file in the root directory:  
   ```env  
   NOSTR_PRIVATE_KEY="YOUR_NOSTR_PRIVATE_KEY"  
   LIGHTNING_API_URL="https://your-lightning-api.com"  
   MODULUS=69420  # Betting range (0â€“69,419)  
   ```  

4. **Start the backend**:  
   ```bash  
   node backend/server.js  
   ```  

5. **Run the frontend**:  
   Open `frontend/index.html` in a browser (or serve it via a local server like `http-server`).  

---

## Usage  
### Game Mechanics  
- **Bet Placement**:  
  1. Choose a bet amount (in sats) and a range (e.g., "33%").  
  2. Pay the Lightning invoice generated by the server.  

- **Outcome Calculation**:  
  The server combines its `server_seed` (published on Nostr) with your `client_secret` (auto-generated or provided by you). The result is computed as:  
  $$  
  \text{Result} = \text{SHA256(server\_seed + client\_secret)}.substring(0, 6) \mod 69420  
  $$  

- **Verification**:  
  Check if the result falls within your chosen range.  

---

## Architecture  
### Core Components  
1. **Backend (Node.js)**:  
   - Handles bet logic, Lightning invoices, and Nostr seed publication.  
   - Uses `nostr-tools` for Nostr events and `crypto-js` for hashing.  

2. **Frontend (HTML/JS)**:  
   - User interface for placing bets and viewing outcomes.  
   - Automatic outcome verification (no manual input required).  

3. **Nostr Integration**:  
   - Server seeds are published as custom events for transparency.  

---

## Contributing  
1. **Fork and clone** the repository.  
2. Create a new branch:  
   ```bash  
   git checkout -b feature/your-feature  
   ```  
3. Make your changes and test them.  
4. Submit a pull request.  

### Contribution Guidelines  
- Follow the **Code of Conduct**.  
- Write clear commit messages.  
- Add tests for new features.  

---

## Security Considerations  
- **Nostr Private Key**: Never expose your Nostr private key. Use environment variables.  
- **Server Seed Rotation**: Seeds must be rotated frequently (e.g., every minute).  
- **Client Secrets**: Store secrets securely (e.g., encrypted in local storage).  

---

## License  
This project is licensed under the **MIT License**.  

---

## Roadmap  
| Phase | Status | Features |  
|-------|--------|----------|  
| **Phase 1** | Completed | Core betting mechanics and provably fair design |  
| **Phase 2** | In Progress | Mobile-responsive UI, multi-language support, wallet integration |  
| **Phase 3** | Planned | Leaderboards, additional games (coin flip, number guessing) |  

---

## Resources  
- **Nostr Documentation**: [nostr.com](https://nostr.com)  
- **Lightning Network**: [lightning.network](https://lightning.network)  
- **Provably Fair Guide**: [github.com/LiteBit/satoshi-shuffle/docs/provably-fair.md](https://github.com/LiteBit/satoshi-shuffle/docs/provably-fair.md)  

---

### Screenshots  
![UI Screenshot](https://via.placeholder.com/600x400?text=Satoshi+Shuffle+UI)  

---

**Join the community** on [GitHub Discussions](https://github.com/LiteBit/satoshi-shuffle/discussions) or [Nostr](https://nostr.band).  

---
